<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>12 Bubbles</title>
<style>
html, body {
  margin:0; padding:0; height:100vh; overflow:hidden;
  font-family: monospace;
  background-color:#0a0a0a;
  color:#fff;
}

/* --- LOADING SCREEN --- */
#loadingScreen {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background:#000; display:flex; justify-content:center; align-items:center;
  color:#fff; font-size:50px; font-weight:bold; z-index:3000;
  text-align:center;
  animation:eyeGlow 2s ease-in-out forwards;
}
@keyframes eyeGlow {
  0% { opacity:0.2; text-shadow:none; }
  50% { opacity:1; text-shadow:0 0 25px #fff,0 0 50px #fff,0 0 75px #fff; }
  100% { opacity:0.2; text-shadow:none; }
}

/* --- HOME BUTTONS --- */
#startBtn, #indexBtn {
  display:none; margin:0 auto;
  font-size:28px; padding:15px 35px;
  background: linear-gradient(45deg,#a044ff,#6a00f4,#d166ff);
  border:none; border-radius:12px; color:#fff;
  font-weight:bold; text-transform:uppercase;
  cursor:pointer; box-shadow:0 0 10px #d166ff,0 0 20px #a044ff;
  z-index:1000;
}
#startBtn { margin-top:30vh; }
#indexBtn { margin-top:20px; }

/* --- Countdown & Score --- */
#countdown {
  position:fixed; top:50%; left:50%;
  transform:translate(-50%,-50%);
  font-size:80px; color:#d166ff;
  text-shadow:0 0 20px #d166ff,0 0 40px #a044ff;
  z-index:1001; display:none;
}
#scoreContainer {
  position:fixed; top:20px; left:50%;
  transform:translateX(-50%);
  z-index:1001; text-align:center; display:none;
}
#highscore { font-size:20px; color:#ff0; margin-bottom:5px; }
#score { font-size:28px; color:#d166ff; }
#lives { font-size:20px; color:#f00; margin-top:5px; }

/* --- Bubbles --- */
.bubble {
  width:80px; height:80px; border-radius:50%;
  display:flex; justify-content:center; align-items:center;
  font-size:24px; font-weight:bold; color:#fff;
  background:linear-gradient(135deg,#a044ff,#6a00f4);
  border:2px solid #d166ff; box-shadow:0 0 10px #d166ff,0 0 20px #a044ff inset;
  position:absolute; cursor:pointer;
}
.bubble.rare2x { background: linear-gradient(135deg,#ffff00,#a044ff); color:#000; font-size:28px; }
.bubble.rare144 { background: linear-gradient(135deg,#0f0,#0a0); color:#000; font-size:28px; }
.bubble.triple { background: linear-gradient(135deg,#f0f,#a0a); color:#fff; font-size:24px; }
.bubble.gravity { background: linear-gradient(135deg,#fff,#d166ff); color:#000; font-size:28px; }
.bubble.invert { background: linear-gradient(135deg,#fff,#000); color:#0ff; font-size:26px; }
.bubble.instawin { background: linear-gradient(135deg,#ff0000,#ffff00); color:#000; font-size:32px; box-shadow:0 0 30px #ff0, 0 0 60px #f00; }

/* --- Index Panel --- */
#indexPanel {
  position:fixed; top:100%; left:0; width:100%;
  max-height:70%; background:rgba(10,10,10,0.95);
  overflow-y:auto; transition:top 0.5s ease; padding:20px;
  z-index:999; box-shadow:0 -5px 30px #d166ff;
}
#indexPanel h2 { text-transform:uppercase; }
#indexPanel .closeBtn {
  position:absolute; top:15px; right:15px; font-size:28px; cursor:pointer;
  color:#fff; font-weight:bold; z-index:1001;
}
.indexItem { display:flex; align-items:center; margin:10px 0; }
.indexItem .bubbleImg {
  width:60px; height:60px; margin-right:15px; border-radius:50%;
  display:flex; justify-content:center; align-items:center;
  font-weight:bold; color:#fff; border:2px solid #d166ff;
  box-shadow:0 0 15px #d166ff inset; animation:float 1s infinite alternate;
}
.indexItem .desc { flex:1; }
.indexItem .rarity { font-weight:bold; }

@keyframes float { 0%{transform:translateY(0);} 100%{transform:translateY(-10px);} }

/* --- Pause Button --- */
#pauseBtn {
  position: fixed;
  top: 20px;
  right: 20px;
  font-size: 36px;
  font-weight: bold;
  color: #fff;
  background: rgba(161, 66, 255, 0.3);
  border: 2px solid #d166ff;
  border-radius: 50%;
  width: 70px;
  height: 70px;
  display: none;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 0 0 15px #d166ff, 0 0 25px #a044ff inset;
  transition: all 0.2s ease;
}
#pauseBtn:hover {
  transform: scale(1.1);
  background: rgba(209, 102, 255, 0.5);
}

/* --- Pause Menu --- */
#pauseScreen {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 2000;
}
.pauseBox {
  text-align: center;
  background: rgba(20,20,20,0.9);
  border: 2px solid #d166ff;
  box-shadow: 0 0 20px #a044ff;
  padding: 30px 50px;
  border-radius: 20px;
}
.pauseBox h2 {
  font-size: 48px;
  color: #d166ff;
  margin-bottom: 30px;
}
.pauseBox button {
  font-size: 22px;
  margin: 10px;
  padding: 12px 35px;
  background: linear-gradient(45deg,#a044ff,#6a00f4,#d166ff);
  border: none;
  color: white;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: 0 0 10px #d166ff, 0 0 20px #a044ff;
}
.pauseBox button:hover {
  transform: scale(1.05);
}

/* --- End Screen --- */
#endScreen {
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.9); display:none; flex-direction:column;
  justify-content:center; align-items:center; color:#fff; font-size:40px;
  z-index:1500; text-align:center;
}
#continueBtn {
  margin-top:30px; font-size:26px; padding:15px 40px;
  border:none; border-radius:10px; cursor:pointer; color:#fff;
  background: linear-gradient(45deg,#a044ff,#6a00f4,#d166ff);
  box-shadow:0 0 10px #d166ff,0 0 20px #a044ff;
}

/* --- Version --- */
#versionLabel {
  position:fixed; top:10px; right:10px; font-size:16px;
  color:rgba(255,255,255,0.3); font-weight:bold; z-index:1002; pointer-events:none;
}

/* --- Easter Egg --- */
#easterEgg {
  position: fixed; top: 0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.9); color:red; font-size:150px;
  font-weight:bold; display:flex; justify-content:center; align-items:center;
  z-index:2000; display:none; text-transform:uppercase; opacity:0;
  animation:fadeShake 5s forwards;
}
@keyframes fadeShake {
  0%{opacity:0; transform:translateX(0);}
  10%{opacity:1; transform:translateX(-5px);}
  20%{transform:translateX(5px);}
  30%{transform:translateX(-5px);}
  40%{transform:translateX(5px);}
  50%{transform:translateX(-5px);}
  60%{transform:translateX(5px);}
  70%{transform:translateX(-5px);}
  80%{transform:translateX(5px);}
  90%{transform:translateX(-5px);}
  100%{opacity:0; transform:translateX(0);}
}
</style>
</head>
<body>

<div id="loadingScreen">Level 12 studio</div>
<div id="versionLabel">Released 1.2.3</div>

<button id="startBtn">START</button>
<button id="indexBtn">INDEX</button>

<div id="indexPanel">
  <div class="closeBtn">✖</div>
  <h2>BUBBLES INDEX</h2>
  <div class="indexItem"><div class="bubbleImg">12</div><div class="desc"><span class="rarity">Běžná:</span> +1 skóre</div></div>
  <div class="indexItem"><div class="bubbleImg" style="background: linear-gradient(135deg,#ffff00,#a044ff); color:#000;">12×2</div><div class="desc"><span class="rarity">Vzácná 0,25 %:</span> Zdvojnásobí skóre</div></div>
  <div class="indexItem"><div class="bubbleImg" style="background: linear-gradient(135deg,#0f0,#0a0); color:#000;">12²</div><div class="desc"><span class="rarity">Vzácná 1 %:</span> +144 skóre</div></div>
  <div class="indexItem"><div class="bubbleImg" style="background: linear-gradient(135deg,#f0f,#a0a);">3×12</div><div class="desc"><span class="rarity">Vzácná 2 %:</span> Spawnuje 3 bubliny</div></div>
  <div class="indexItem"><div class="bubbleImg" style="background: linear-gradient(135deg,#fff,#d166ff); color:#000;">&lt;12&gt;</div><div class="desc"><span class="rarity">Vzácná 3 %:</span> Přitáhne všechny bubliny k sobě</div></div>
  <div class="indexItem"><div class="bubbleImg" style="background: linear-gradient(135deg,#fff,#000); color:#0ff;">!12!</div><div class="desc"><span class="rarity">Vzácná 1,5 %:</span> Invertuje barvy +10 skóre</div></div>
  <div class="indexItem"><div class="bubbleImg" style="background: linear-gradient(135deg,#ff0000,#ffff00); color:#000;">?12?</div><div class="desc"><span class="rarity">Vzácná 0,1 %:</span> Okamžité vítězství</div></div>
</div>

<div id="countdown"></div>
<div id="scoreContainer">
  <div id="highscore">Nejvyšší skóre: 0</div>
  <div id="score">Skóre: 0</div>
  <div id="lives">Životy: 3</div>
</div>

<!-- PAUSE BUTTON + MENU -->
<button id="pauseBtn">|  |</button>
<div id="pauseScreen">
  <div class="pauseBox">
    <h2>PAUZA</h2>
    <button id="continueGameBtn">Pokračovat</button>
    <button id="endGameBtn">Ukončit hru</button>
  </div>
</div>

<div id="endScreen">
  <div id="finalScoreText"></div>
  <button id="continueBtn">ZPĚT</button>
</div>

<div id="easterEgg"></div>

<script>
const startBtn=document.getElementById('startBtn');
const indexBtn=document.getElementById('indexBtn');
const indexPanel=document.getElementById('indexPanel');
const countdownEl=document.getElementById('countdown');
const scoreContainer=document.getElementById('scoreContainer');
const scoreEl=document.getElementById('score');
const highscoreEl=document.getElementById('highscore');
const livesEl=document.getElementById('lives');
const endScreen=document.getElementById('endScreen');
const finalScoreText=document.getElementById('finalScoreText');
const continueBtn=document.getElementById('continueBtn');
const versionLabel=document.getElementById('versionLabel');
const easterEl=document.getElementById('easterEgg');
const closeBtn=document.querySelector('#indexPanel .closeBtn');
const loadingScreen=document.getElementById('loadingScreen');
const pauseBtn=document.getElementById('pauseBtn');
const pauseScreen=document.getElementById('pauseScreen');
const continueGameBtn=document.getElementById('continueGameBtn');
const endGameBtn=document.getElementById('endGameBtn');

let score=0,highscore=0,lives=3,bubbles=[],gameRunning=false,gamePaused=false,startTime;

// --- LOADING ---
window.addEventListener('load',()=>{
  setTimeout(()=>{
    loadingScreen.style.display='none';
    startBtn.style.display='block';
    indexBtn.style.display='block';
    attachButtonEvents();
  },2000);
});

function attachButtonEvents(){
  startBtn.addEventListener('click',startCountdown);
  indexBtn.addEventListener('click',(e)=>{
    e.stopPropagation();
    if(indexPanel.style.top==='30%'){indexPanel.style.top='100%';startBtn.style.display='block';indexBtn.style.display='block';}
    else{indexPanel.style.top='30%';startBtn.style.display='none';indexBtn.style.display='none';}
  });
  closeBtn.addEventListener('click',()=>{
    indexPanel.style.top='100%';startBtn.style.display='block';indexBtn.style.display='block';
  });
  continueBtn.addEventListener('click',()=>{
    endScreen.style.display='none';startBtn.style.display='block';indexBtn.style.display='block';versionLabel.style.display='block';
  });
  pauseBtn.addEventListener('click',togglePause);
  continueGameBtn.addEventListener('click',togglePause);
  endGameBtn.addEventListener('click',()=>{pauseScreen.style.display='none';pauseBtn.style.display='none';endGame();});
  window.addEventListener('blur',()=>{if(gameRunning&&!gamePaused)togglePause();});
}

function startCountdown(){
  versionLabel.style.display='none';startBtn.style.display='none';indexBtn.style.display='none';
  countdownEl.style.display='block';
  let count=3;countdownEl.textContent=count;
  const interval=setInterval(()=>{
    count--;if(count>0)countdownEl.textContent=count;
    else{clearInterval(interval);countdownEl.style.display='none';scoreContainer.style.display='block';pauseBtn.style.display='flex';startGame();}
  },1000);
}

function startGame(){
  score=0;lives=3;bubbles=[];gameRunning=true;gamePaused=false;startTime=Date.now();
  scoreEl.textContent="Skóre: "+score;livesEl.textContent="Životy: "+lives;
  spawnBubble();requestAnimationFrame(updateBubbles);
}

function togglePause(){
  if(!gameRunning)return;
  gamePaused=!gamePaused;
  pauseScreen.style.display=gamePaused?'flex':'none';
}

function updateBubbles(){
  if(!gameRunning)return;
  if(!gamePaused){
    bubbles.forEach(b=>{
      const top=parseFloat(b.style.top);
      b.style.top=top-parseFloat(b.dataset.speed)+'px';
      if(top<=0){lives--;livesEl.textContent="Životy: "+lives;b.remove();bubbles=bubbles.filter(x=>x!==b);if(lives<=0)endGame();}
    });
  }
  requestAnimationFrame(updateBubbles);
}

function spawnBubble(){
  if(!gameRunning)return;
  if(gamePaused){setTimeout(spawnBubble,500);return;}
  const elapsed=(Date.now()-startTime)/1000;
  const speedMultiplier=1+elapsed/120;
  const typeRand=Math.random()*100;
  let type='normal';
  if(typeRand<0.1)type='instawin';
  else if(typeRand<1.6)type='invert';
  else if(typeRand<4.6)type='gravity';
  else if(typeRand<6.6)type='triple';
  else if(typeRand<7.6)type='rare144';
  else if(typeRand<7.85)type='rare2x';
  const bubble=document.createElement('div');
  bubble.className='bubble '+type;
  bubble.textContent='12';
  bubble.style.left=Math.random()*(window.innerWidth-80)+'px';
  bubble.style.top=window.innerHeight+'px';
  bubble.dataset.speed=(1.5+Math.random()*1.5)*speedMultiplier;
  bubble.dataset.type=type;
  bubble.addEventListener('click',()=>popBubble(bubble));
  document.body.appendChild(bubble);bubbles.push(bubble);
  const nextDelay=Math.max(300,1500-speedMultiplier*200);
  setTimeout(spawnBubble,nextDelay);
}

function popBubble(bubble){
  if(!gameRunning)return;
  const type=bubble.dataset.type;
  if(type==='normal')score++;
  else if(type==='rare2x')score*=2;
  else if(type==='rare144')score+=144;
  else if(type==='triple')for(let i=0;i<3;i++)spawnExtraBubble();
  else if(type==='gravity')bubbles.forEach(b=>b.style.top='100px');
  else if(type==='invert'){document.body.style.filter='invert(1)';setTimeout(()=>document.body.style.filter='invert(0)',2000);score+=10;}
  else if(type==='instawin'){score+=9999;endGame();}
  bubble.remove();bubbles=bubbles.filter(b=>b!==bubble);
  scoreEl.textContent="Skóre: "+score;
}

function spawnExtraBubble(){
  const bubble=document.createElement('div');
  bubble.className='bubble';
  bubble.textContent='12';
  bubble.style.left=Math.random()*(window.innerWidth-80)+'px';
  bubble.style.top=window.innerHeight+'px';
  bubble.dataset.speed=2.5;bubble.dataset.type='normal';
  bubble.addEventListener('click',()=>popBubble(bubble));
  document.body.appendChild(bubble);bubbles.push(bubble);
}

function endGame(){
  gameRunning=false;pauseBtn.style.display='none';
  bubbles.forEach(b=>b.remove());bubbles=[];
  finalScoreText.textContent="KONEC HRY\nSKÓRE: "+score;
  endScreen.style.display='flex';
  if(score>highscore){highscore=score;highscoreEl.textContent="Nejvyšší skóre: "+highscore;}
}
</script>
</body>
</html>
