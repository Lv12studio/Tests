<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bubble Pop - Verze 12</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif;}
body{
  background:radial-gradient(circle at top,#001,#004);
  overflow:hidden;
  height:100vh;
  color:white;
  user-select:none;
}
#scoreContainer{
  position:fixed;top:10px;left:10px;display:flex;flex-direction:column;gap:5px;font-size:20px;z-index:10;
}
#pauseBtn{
  position:fixed;top:15px;right:20px;width:40px;height:40px;
  background:rgba(255,255,255,0.1);
  border:2px solid rgba(255,255,255,0.4);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:0.2s;
  z-index:10;
}
#pauseBtn:hover{background:rgba(255,255,255,0.25);transform:scale(1.05);}
.pause-icon{
  display:flex;
  justify-content:space-between;
  width:14px;
  height:18px;
}
.pause-icon div{
  width:4px;
  height:100%;
  background:white;
  border-radius:1px;
}

/* Pause Screen */
#pauseScreen{
  position:fixed;inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  backdrop-filter:blur(8px);
  background:rgba(0,0,0,0.4);
  z-index:20;
  animation-duration:0.3s;
}
.fadeIn{animation:fadeIn 0.3s forwards;}
.fadeOut{animation:fadeOut 0.3s forwards;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
@keyframes fadeOut{from{opacity:1;}to{opacity:0;}}
.pause-btn{
  background:#08f;
  color:white;
  border:none;
  padding:12px 24px;
  font-size:20px;
  border-radius:12px;
  cursor:pointer;
  margin-top:20px;
  transition:0.3s;
}
.pause-btn:hover{background:#0af;transform:scale(1.05);}

/* Bubbles */
.bubble{
  position:absolute;
  background:radial-gradient(circle at 30% 30%,#fff,rgba(255,255,255,0.2));
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
  transition:transform 0.2s;
  box-shadow:0 0 10px rgba(255,255,255,0.4);
}
.bubble:hover{transform:scale(1.15);}
.bubble:active{transform:scale(0.9);}
.bubble.instawin{background:radial-gradient(circle at 30% 30%,#0f0,#040);}
.bubble.invert{background:radial-gradient(circle at 30% 30%,#ff0,#660);}
.bubble.rare2x{background:radial-gradient(circle at 30% 30%,#0af,#004);}
.bubble.rare144{background:radial-gradient(circle at 30% 30%,#f0f,#404);}
.bubble.triple{background:radial-gradient(circle at 30% 30%,#fa0,#520);}
.bubble.gravity{background:radial-gradient(circle at 30% 30%,#0ff,#044);}

/* End screen */
#endScreen{
  position:fixed;inset:0;
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  backdrop-filter:blur(5px);
  background:rgba(0,0,0,0.6);
  z-index:30;
}
#endScreen button{
  background:#08f;color:white;
  border:none;border-radius:10px;
  padding:12px 24px;
  font-size:18px;
  margin-top:20px;
  cursor:pointer;
  transition:0.3s;
}
#endScreen button:hover{background:#0af;transform:scale(1.05);}

/* Easter screen */
#easterEl{
  display:none;
  position:fixed;
  inset:0;
  justify-content:center;
  align-items:center;
  font-size:100px;
  color:white;
  z-index:40;
  animation:fadeShake 3s forwards;
}
@keyframes fadeShake{
  0%{opacity:0;transform:scale(0.5);}
  50%{opacity:1;transform:scale(1.2);}
  100%{opacity:0;transform:scale(0);}
}
</style>
</head>
<body>
<div id="scoreContainer">
  <div id="score">Skóre: 0</div>
  <div id="lives">Životy: 3</div>
  <div id="highscore">Nejvyšší skóre: 0</div>
</div>

<div id="pauseBtn" title="Pauza">
  <div class="pause-icon">
    <div></div><div></div>
  </div>
</div>

<div id="pauseScreen">
  <h1>Pauza</h1>
  <button class="pause-btn" id="continueGameBtn">Pokračovat</button>
  <button class="pause-btn" id="endGameBtn">Ukončit hru</button>
</div>

<div id="endScreen">
  <h1 id="finalScoreText"></h1>
  <button id="continueBtn">Zpět do menu</button>
</div>

<div id="easterEl"></div>

<script>
let score=0, lives=3, highscore=0;
let bubbles=[], gameRunning=false, gamePaused=false, startTime=0;

const scoreEl=document.getElementById('score');
const livesEl=document.getElementById('lives');
const highscoreEl=document.getElementById('highscore');
const pauseBtn=document.getElementById('pauseBtn');
const pauseScreen=document.getElementById('pauseScreen');
const continueGameBtn=document.getElementById('continueGameBtn');
const endGameBtn=document.getElementById('endGameBtn');
const endScreen=document.getElementById('endScreen');
const continueBtn=document.getElementById('continueBtn');
const easterEl=document.getElementById('easterEl');

pauseBtn.addEventListener('click',togglePause);
continueGameBtn.addEventListener('click',togglePause);
endGameBtn.addEventListener('click',endGame);
continueBtn.addEventListener('click',()=>location.reload());

startGame();

function startGame(){
  score=0; lives=3; bubbles=[]; gameRunning=true; gamePaused=false; startTime=Date.now();
  scoreEl.textContent="Skóre: "+score; livesEl.textContent="Životy: "+lives;
  spawnBubble();
  requestAnimationFrame(updateBubbles);
}

function togglePause(){
  if(!gameRunning) return;
  gamePaused=!gamePaused;
  if(gamePaused){
    pauseScreen.classList.remove('fadeOut'); pauseScreen.classList.add('fadeIn'); pauseScreen.style.display='flex';
  } else{
    pauseScreen.classList.remove('fadeIn'); pauseScreen.classList.add('fadeOut'); setTimeout(()=> pauseScreen.style.display='none',500);
  }
}

function updateBubbles(){
  if(!gameRunning) return;
  if(!gamePaused){
    bubbles.forEach(bubble=>{
      const top=parseFloat(bubble.style.top);
      bubble.style.top=top-parseFloat(bubble.dataset.speed)+'px';
      if(top<=0){  
        lives--; livesEl.textContent="Životy: "+lives;  
        bubble.remove(); bubbles=bubbles.filter(b=>b!==bubble);  
        if(lives<=0) endGame();
      }
    });
  }
  requestAnimationFrame(updateBubbles);
}

function spawnBubble(){
  if(!gameRunning) return;
  if(gamePaused){ setTimeout(spawnBubble,500); return; }

  const elapsed=(Date.now()-startTime)/1000;
  const speedMultiplier=1+elapsed/120;
  const chance=Math.random();
  const bubble=document.createElement('div');
  bubble.classList.add('bubble');

  if(chance<=0.001){ bubble.classList.add('instawin'); bubble.textContent="?12?"; bubble.dataset.type="instawin"; }
  else if(chance<=0.016){ bubble.classList.add('invert'); bubble.textContent="!12!"; bubble.dataset.type="invert"; }
  else if(chance<=0.0185){ bubble.classList.add('rare2x'); bubble.textContent="12×2"; bubble.dataset.type="2x"; }
  else if(chance<=0.0285){ bubble.classList.add('rare144'); bubble.textContent="12²"; bubble.dataset.type="144"; }
  else if(chance<=0.0485){ bubble.classList.add('triple'); bubble.textContent="3×12"; bubble.dataset.type="triple"; }
  else if(chance<=0.0785){ bubble.classList.add('gravity'); bubble.textContent="<12>"; bubble.dataset.type="gravity"; }
  else { bubble.textContent="12"; bubble.dataset.type="normal"; }

  const size=Math.random()*60+60;
  bubble.style.width=size+'px';
  bubble.style.height=size+'px';
  bubble.style.fontSize=(bubble.dataset.type==="144"?size/2.5:size/3)+'px';
  bubble.style.left=Math.random()*(window.innerWidth-size)+'px';
  bubble.style.top=(window.innerHeight-size)+'px';
  bubble.dataset.speed=(Math.random()*1.5+1)*speedMultiplier;
  document.body.appendChild(bubble);

  const pop=()=>{
    if(!gameRunning) return;
    bubble.remove(); bubbles=bubbles.filter(b=>b!==bubble);
    if(bubble.dataset.type==="2x") score*=2;
    else if(bubble.dataset.type==="144") score+=144;
    else if(bubble.dataset.type==="gravity"){
      const bx=parseFloat(bubble.style.left)+parseFloat(bubble.style.width)/2;
      const by=parseFloat(bubble.style.top)+parseFloat(bubble.style.height)/2;
      bubbles.forEach(b=>{ b.style.left=(bx-parseFloat(b.style.width)/2)+'px'; b.style.top=(by-parseFloat(b.style.height)/2)+'px'; });
    }
    else if(bubble.dataset.type==="invert"){ document.body.style.filter='invert(1)'; score+=10; setTimeout(()=>document.body.style.filter='',5000); }
    else if(bubble.dataset.type==="instawin"){ score+=999999999; }
    else score++;

    if(score>999999999) score=999999999;
    scoreEl.textContent="Skóre: "+score;
    if(score>highscore){ highscore=score; highscoreEl.textContent="Nejvyšší skóre: "+highscore; }
  };

  bubble.addEventListener('click',pop); bubble.addEventListener('touchstart',pop);
  bubbles.push(bubble);
  setTimeout(spawnBubble,500);
}

function endGame(){
  gameRunning=false; bubbles.forEach(b=>b.remove()); bubbles=[];
  document.getElementById('scoreContainer').style.display='none';
  pauseBtn.style.display='none'; pauseScreen.style.display='none';
  endScreen.style.display='flex';
  document.getElementById('finalScoreText').textContent="Tvé skóre: "+score;
}
</script>
</body>
</html>
