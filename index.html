<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>12Bubbles</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif;}
body{
  background:radial-gradient(circle at top,#001,#004);
  overflow:hidden;
  height:100vh;
  color:white;
  user-select:none;
}

/* -------- OBECNÉ -------- */
#mainMenu, #indexMenu, #gameUI, #pauseScreen, #endScreen, #easterEl{
  position:fixed;inset:0;display:none;align-items:center;justify-content:center;flex-direction:column;
}
.active{display:flex;}
.menu-btn{
  background:#08f;color:white;border:none;border-radius:15px;
  padding:15px 40px;font-size:22px;margin:15px;cursor:pointer;transition:0.3s;
}
.menu-btn:hover{background:#0af;transform:scale(1.05);}
#versionLabel{position:absolute;bottom:15px;opacity:0.5;}

/* -------- HERNÍ UI -------- */
#scoreContainer{
  position:fixed;top:10px;left:10px;
  display:flex;flex-direction:column;gap:5px;font-size:20px;z-index:10;
}
#pauseBtn{
  position:fixed;top:15px;right:20px;width:40px;height:40px;
  background:rgba(255,255,255,0.1);
  border:2px solid rgba(255,255,255,0.4);
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;transition:0.2s;z-index:10;
}
#pauseBtn:hover{background:rgba(255,255,255,0.25);transform:scale(1.05);}
.pause-icon{display:flex;justify-content:space-between;width:14px;height:18px;}
.pause-icon div{width:4px;height:100%;background:white;border-radius:1px;}

/* -------- PAUSE SCREEN -------- */
#pauseScreen{
  backdrop-filter:blur(8px);
  background:rgba(0,0,0,0.4);
  text-align:center;z-index:20;
}
#pauseScreen h1{font-size:60px;margin-bottom:20px;}
.pause-btn{
  background:#08f;color:white;border:none;padding:12px 24px;font-size:20px;
  border-radius:12px;cursor:pointer;margin:10px;transition:0.3s;
}
.pause-btn:hover{background:#0af;transform:scale(1.05);}

/* -------- END SCREEN -------- */
#endScreen{
  backdrop-filter:blur(5px);
  background:rgba(0,0,0,0.6);
  text-align:center;
}
#endScreen h1{font-size:50px;margin-bottom:20px;}
#endScreen button{
  background:#08f;color:white;border:none;border-radius:10px;
  padding:12px 24px;font-size:20px;margin:10px;cursor:pointer;transition:0.3s;
}
#endScreen button:hover{background:#0af;transform:scale(1.05);}

/* -------- BUBBLES -------- */
.bubble{
  position:absolute;
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:bold;cursor:pointer;transition:transform 0.2s;
  box-shadow:0 0 10px rgba(255,255,255,0.4);
}
.bubble:hover{transform:scale(1.15);}
.bubble:active{transform:scale(0.9);}
.bubble.normal{background:radial-gradient(circle at 30% 30%,#fff,rgba(255,255,255,0.2));}
.bubble.instawin{background:radial-gradient(circle at 30% 30%,#0f0,#040);}
.bubble.invert{background:radial-gradient(circle at 30% 30%,#ff0,#660);}
.bubble.rare2x{background:radial-gradient(circle at 30% 30%,#0af,#004);}
.bubble.rare144{background:radial-gradient(circle at 30% 30%,#f0f,#404);}
.bubble.triple{background:radial-gradient(circle at 30% 30%,#fa0,#520);}
.bubble.gravity{background:radial-gradient(circle at 30% 30%,#0ff,#044);}

/* -------- INDEX MENU -------- */
#bubbleList{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  max-width:900px;
  margin-top:20px;
}
.bubbleCard{
  background:rgba(255,255,255,0.1);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:15px;
  padding:15px;text-align:center;
  transition:0.3s;
}
.bubbleCard:hover{background:rgba(255,255,255,0.2);transform:scale(1.05);}
.bubbleExample{
  width:60px;height:60px;margin:auto;margin-bottom:10px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;font-weight:bold;
}

/* -------- EASTER -------- */
#easterEl{
  font-size:100px;
  color:white;
  z-index:40;
  animation:fadeShake 3s forwards;
}
@keyframes fadeShake{
  0%{opacity:0;transform:scale(0.5);}
  50%{opacity:1;transform:scale(1.2);}
  100%{opacity:0;transform:scale(0);}
}
</style>
</head>
<body>

<!-- ===== MAIN MENU ===== -->
<div id="mainMenu" class="active">
  <h1 style="font-size:60px;margin-bottom:20px;">💠 12Bubbles 💠</h1>
  <button class="menu-btn" id="playBtn">Hrát</button>
  <button class="menu-btn" id="indexBtn">Index bublin</button>
  <div id="versionLabel">Verze 1.0</div>
</div>

<!-- ===== INDEX MENU ===== -->
<div id="indexMenu">
  <h1>📘 Index bublin</h1>
  <div id="bubbleList">
    <div class="bubbleCard">
      <div class="bubbleExample normal">12</div>
      <h3>Normální bublina</h3>
      <p>🎯 Základní bublina. Klikni pro +1 bod.</p>
      <p>Rarita: 🟢 Běžná</p>
    </div>
    <div class="bubbleCard">
      <div class="bubbleExample rare2x" style="background:radial-gradient(circle at 30% 30%,#0af,#004);">×2</div>
      <h3>Double Bubble</h3>
      <p>⚡ Zdvojnásobí aktuální skóre.</p>
      <p>Rarita: 🟣 Vzácná</p>
    </div>
    <div class="bubbleCard">
      <div class="bubbleExample rare144" style="background:radial-gradient(circle at 30% 30%,#f0f,#404);">12²</div>
      <h3>Power Bubble</h3>
      <p>💥 Přidá 144 bodů.</p>
      <p>Rarita: 🔵 Velmi vzácná</p>
    </div>
    <div class="bubbleCard">
      <div class="bubbleExample triple" style="background:radial-gradient(circle at 30% 30%,#fa0,#520);">3×12</div>
      <h3>Triple Bubble</h3>
      <p>🫧 Bonusová — dříve spawnovala tři, nyní přidá bonusové body.</p>
      <p>Rarita: 🟠 Neobvyklá</p>
    </div>
    <div class="bubbleCard">
      <div class="bubbleExample gravity" style="background:radial-gradient(circle at 30% 30%,#0ff,#044);">&lt;12&gt;</div>
      <h3>Gravity Bubble</h3>
      <p>🌌 Přitáhne ostatní bubliny k sobě.</p>
      <p>Rarita: 🟣 Vzácná</p>
    </div>
    <div class="bubbleCard">
      <div class="bubbleExample invert" style="background:radial-gradient(circle at 30% 30%,#ff0,#660);">!12!</div>
      <h3>Invert Bubble</h3>
      <p>🌀 Na chvíli obrátí barvy hry.</p>
      <p>Rarita: 🔴 Ultra vzácná</p>
    </div>
    <div class="bubbleCard">
      <div class="bubbleExample instawin" style="background:radial-gradient(circle at 30% 30%,#0f0,#040);">?12?</div>
      <h3>Instawin Bubble</h3>
      <p>🏆 Okamžitě vyhraješ hru. Extrémně vzácná.</p>
      <p>Rarita: 🟡 Legendární</p>
    </div>
  </div>
  <button class="menu-btn" id="backToMenu">Zpět</button>
</div>

<!-- ===== GAME UI ===== -->
<div id="gameUI">
  <div id="scoreContainer">
    <div id="score">Skóre: 0</div>
    <div id="lives">Životy: 3</div>
    <div id="highscore">Nejvyšší skóre: 0</div>
  </div>
  <div id="pauseBtn">
    <div class="pause-icon"><div></div><div></div></div>
  </div>
</div>

<!-- ===== PAUSE SCREEN ===== -->
<div id="pauseScreen">
  <h1>Pauza</h1>
  <button class="pause-btn" id="continueGameBtn">Pokračovat</button>
  <button class="pause-btn" id="endGameBtn">Ukončit hru</button>
</div>

<!-- ===== END SCREEN ===== -->
<div id="endScreen">
  <h1 id="finalScoreText"></h1>
  <button id="continueBtn">Zpět do menu</button>
</div>

<!-- ===== EASTER SCREEN ===== -->
<div id="easterEl"></div>

<script>
let score=0,lives=3,highscore=0;
let bubbles=[],gameRunning=false,gamePaused=false,startTime=0;

const mainMenu=document.getElementById('mainMenu');
const indexMenu=document.getElementById('indexMenu');
const gameUI=document.getElementById('gameUI');
const pauseScreen=document.getElementById('pauseScreen');
const endScreen=document.getElementById('endScreen');
const easterEl=document.getElementById('easterEl');
const scoreEl=document.getElementById('score');
const livesEl=document.getElementById('lives');
const highscoreEl=document.getElementById('highscore');

document.getElementById('playBtn').onclick=()=>{mainMenu.classList.remove('active');startGame();};
document.getElementById('indexBtn').onclick=()=>{mainMenu.classList.remove('active');indexMenu.classList.add('active');};
document.getElementById('backToMenu').onclick=()=>{indexMenu.classList.remove('active');mainMenu.classList.add('active');};
document.getElementById('continueBtn').onclick=()=>{endScreen.classList.remove('active');mainMenu.classList.add('active');};
document.getElementById('pauseBtn').onclick=togglePause;
document.getElementById('continueGameBtn').onclick=togglePause;
document.getElementById('endGameBtn').onclick=endGame;

function startGame(){
  gameUI.classList.add('active');
  score=0;lives=3;bubbles=[];gameRunning=true;gamePaused=false;startTime=Date.now();
  scoreEl.textContent="Skóre: "+score;livesEl.textContent="Životy: "+lives;
  spawnBubble();
  requestAnimationFrame(updateBubbles);
}

function togglePause(){
  if(!gameRunning)return;
  gamePaused=!gamePaused;
  pauseScreen.classList.toggle('active',gamePaused);
}

function updateBubbles(){
  if(!gameRunning)return;
  if(!gamePaused){
    bubbles.forEach(bubble=>{
      const top=parseFloat(bubble.style.top);
      bubble.style.top=top-parseFloat(bubble.dataset.speed)+'px';
      if(top<=0){
        lives--;livesEl.textContent="Životy: "+lives;
        bubble.remove();bubbles=bubbles.filter(b=>b!==bubble);
        if(lives<=0)endGame();
      }
    });
  }
  requestAnimationFrame(updateBubbles);
}

function spawnBubble(){
  if(!gameRunning)return;
  if(gamePaused){setTimeout(spawnBubble,500);return;}

  const elapsed=(Date.now()-startTime)/1000;
  const speedMult=1+elapsed/120;
  const chance=Math.random();
  const bubble=document.createElement('div');bubble.classList.add('bubble');

  if(chance<=0.001){bubble.classList.add('instawin');bubble.textContent="?12?";bubble.dataset.type="instawin";}
  else if(chance<=0.016){bubble.classList.add('invert');bubble.textContent="!12!";bubble.dataset.type="invert";}
  else if(chance<=0.0185){bubble.classList.add('rare2x');bubble.textContent="12×2";bubble.dataset.type="2x";}
  else if(chance<=0.0285){bubble.classList.add('rare144');bubble.textContent="12²";bubble.dataset.type="144";}
  else if(chance<=0.0485){bubble.classList.add('triple');bubble.textContent="3×12";bubble.dataset.type="triple";}
  else if(chance<=0.0785){bubble.classList.add('gravity');bubble.textContent="<12>";bubble.dataset.type="gravity";}
  else {bubble.classList.add('normal');bubble.textContent="12";bubble.dataset.type="normal";}

  const size=Math.random()*60+60;
  bubble.style.width=size+'px';bubble.style.height=size+'px';
  bubble.style.left=Math.random()*(window.innerWidth-size)+'px';
  bubble.style.top=(window.innerHeight-size)+'px';
  bubble.dataset.speed=(Math.random()*1.5+1)*speedMult;
  document.body.appendChild(bubble);

  bubble.addEventListener('click',()=>pop(bubble));
  bubbles.push(bubble);
  setTimeout(spawnBubble,700);
}

function pop(bubble){
  if(!gameRunning)return;
  bubble.remove();bubbles=bubbles.filter(b=>b!==bubble);
  switch(bubble.dataset.type){
    case "2x":score*=2;break;
    case "144":score+=144;break;
    case "gravity":
      const bx=parseFloat(bubble.style.left)+parseFloat(bubble.style.width)/2;
      const by=parseFloat(bubble.style.top)+parseFloat(bubble.style.height)/2;
      bubbles.forEach(b=>{b.style.left=(bx-parseFloat(b.style.width)/2)+'px';b.style.top=(by-parseFloat(b.style.height)/2)+'px';});
      break;
    case "invert":document.body.style.filter='invert(1)';score+=10;setTimeout(()=>document.body.style.filter='',5000);break;
    case "instawin":score+=999999999;break;
    case "triple":score+=12;break;
    default:score++;
  }
  if(score>highscore){highscore=score;highscoreEl.textContent="Nejvyšší skóre: "+highscore;}
  scoreEl.textContent="Skóre: "+score;
}

function endGame(){
  gameRunning=false;
  bubbles.forEach(b=>b.remove());
  bubbles=[];
  gameUI.classList.remove('active');
  pauseScreen.classList.remove('active');
  if(score===12||score<=3){
    easterEl.textContent=(score===12?'12':'BRUH');
    easterEl.classList.add('active');
    setTimeout(()=>{easterEl.classList.remove('active');showEndScreen();},1200);
  }else showEndScreen();
}

function showEndScreen(){
  endScreen.classList.add('active');
  document.getElementById('finalScoreText').textContent="Tvé skóre: "+score;
}
</script>
</body>
</html>
